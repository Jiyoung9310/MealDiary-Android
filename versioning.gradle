ext {
    def rawBuildNumber = System.getenv("BITRISE_BUILD_NUMBER") ?: "0"
    def buildNumber = Integer.parseInt(rawBuildNumber)

    buildVersionCode = {
        def (major, minor, patch) = mealDiaryVersion.tokenize('.').collect {
            it.toInteger()
        }

        def screenVersion = supportedScreenSize.toInteger()

        def resultVersionCode = (min_sdk_version * 10000000) + (screenVersion * 100000) + (major * 10000) + (minor * 100) + (patch * 1)

        println("versionCode = ${resultVersionCode}")

        resultVersionCode
    }

    buildVersionName = {
        def resultVersionName = "${mealDiaryVersion}"

        println("versionName = ${resultVersionName}")

        mealDiaryVersion
    }

    getApkName = { buildType ->
        def resultApkName = "mealDiary-${buildVersionName()}.${buildNumber}-${buildType}.apk"

        println("apkName = ${resultApkName}")

        resultApkName
    }
}